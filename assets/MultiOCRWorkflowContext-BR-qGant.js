import{a as s,p as D}from"./chunk-B7RQU5TL-xj-QjgGV.js";const g={questionCompilerAgentId:"",responseAgentIds:[],maxImages:3},R=s.createContext(void 0);function N({children:a}){const[m,i]=s.useState(g),[O,I]=s.useState(!0),[d,c]=s.useState([]),[k,u]=s.useState([]),[x,f]=s.useState(""),[v,p]=s.useState(null),[W,C]=s.useState({});s.useEffect(()=>{try{const e=localStorage.getItem("multi-ocr-workflow-config");if(e){const o=JSON.parse(e);i(t=>({...g,...o}))}}catch(e){console.error("Error loading Multi-OCR Workflow config from localStorage:",e)}finally{I(!1)}},[]);const M=e=>{i(o=>({...o,...e}))},h=e=>{i(e);try{localStorage.setItem("multi-ocr-workflow-config",JSON.stringify(e))}catch(o){console.error("Error saving Multi-OCR Workflow config to localStorage:",o)}},A=()=>{i(g);try{localStorage.removeItem("multi-ocr-workflow-config")}catch(e){console.error("Error removing Multi-OCR Workflow config from localStorage:",e)}},E=e=>{const o=m.maxImages||3,t=d.length,n=Math.max(0,o-t),z=e.slice(0,n).map(r=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),file:r,name:r.name,size:r.size,status:"pending"}));c(r=>[...r,...z])},T=e=>{c(o=>o.filter(t=>t.id!==e))},w=()=>{c([])},P=(e,o,t)=>{c(n=>n.map(l=>l.id===e?{...l,status:o,...t&&{ocrResult:t}}:l))},y=()=>{u([{id:"ocr-processing",name:"Procesamiento OCR de imágenes",status:"pending"},{id:"ocr-compilation",name:"Compilación de resultados OCR",status:"pending"},{id:"question-compiler",name:"Procesamiento con agente compilador",status:"pending"},{id:"response-agents",name:"Procesamiento con agentes de respuesta",status:"pending"}])},L=(e,o)=>{u(t=>t.map(n=>n.id===e?{...n,...o}:n))},_=()=>{u([]),w(),S()},b=(e,o)=>{C(t=>({...t,[e]:o}))},S=()=>{f(""),p(null),C({})},q={config:m,updateConfig:M,saveConfig:h,resetToDefaults:A,isLoading:O,images:d,addImages:E,removeImage:T,clearImages:w,updateImageStatus:P,workflowSteps:k,updateWorkflowStep:L,initializeWorkflowSteps:y,resetWorkflow:_,compiledOCRText:x,setCompiledOCRText:f,questionCompilerResult:v,setQuestionCompilerResult:p,responseAgentsResults:W,setResponseAgentResult:b,clearResults:S};return D.jsx(R.Provider,{value:q,children:a})}function j(){const a=s.useContext(R);if(a===void 0)throw new Error("useMultiOCRWorkflow must be used within a MultiOCRWorkflowProvider");return a}export{N as M,j as u};
