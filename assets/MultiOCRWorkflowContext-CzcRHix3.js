import{a as s,p as N}from"./chunk-B7RQU5TL-xj-QjgGV.js";const g={questionCompilerAgentId:"",responseAgentIds:[],maxImages:3},k=s.createContext(void 0);function U({children:a}){const[m,i]=s.useState(g),[I,O]=s.useState(!0),[f,c]=s.useState([]),[W,l]=s.useState([]),[x,d]=s.useState(!1),[v,p]=s.useState(""),[M,C]=s.useState(null),[h,w]=s.useState({});s.useEffect(()=>{try{const e=localStorage.getItem("multi-ocr-workflow-config");if(e){const o=JSON.parse(e);i(t=>({...g,...o}))}}catch(e){console.error("Error loading Multi-OCR Workflow config from localStorage:",e)}finally{O(!1)}},[]);const A=e=>{i(o=>({...o,...e}))},E=e=>{i(e);try{localStorage.setItem("multi-ocr-workflow-config",JSON.stringify(e))}catch(o){console.error("Error saving Multi-OCR Workflow config to localStorage:",o)}},T=()=>{i(g);try{localStorage.removeItem("multi-ocr-workflow-config")}catch(e){console.error("Error removing Multi-OCR Workflow config from localStorage:",e)}},P=e=>{const o=m.maxImages||3,t=f.length,n=Math.max(0,o-t),F=e.slice(0,n).map(r=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),file:r,name:r.name,size:r.size,status:"pending"}));c(r=>[...r,...F])},y=e=>{c(o=>o.filter(t=>t.id!==e))},R=()=>{c([])},L=(e,o,t)=>{c(n=>n.map(u=>u.id===e?{...u,status:o,...t&&{ocrResult:t}}:u))},_=()=>{l([{id:"ocr-processing",name:"Procesamiento OCR de imágenes",status:"pending"},{id:"ocr-compilation",name:"Compilación de resultados OCR",status:"pending"},{id:"question-compiler",name:"Procesamiento con agente compilador",status:"pending"},{id:"response-agents",name:"Procesamiento con agentes de respuesta",status:"pending"}])},b=(e,o)=>{l(t=>t.map(n=>n.id===e?{...n,...o}:n))},q=()=>{l([]),R(),S()},z=(e,o)=>{w(t=>({...t,[e]:o}))},S=()=>{p(""),C(null),w({})},D={config:m,updateConfig:A,saveConfig:E,resetToDefaults:T,isLoading:I,images:f,addImages:P,removeImage:y,clearImages:R,updateImageStatus:L,workflowSteps:W,updateWorkflowStep:b,initializeWorkflowSteps:_,resetWorkflow:q,compiledOCRText:v,setCompiledOCRText:p,questionCompilerResult:M,setQuestionCompilerResult:C,responseAgentsResults:h,setResponseAgentResult:z,clearResults:S,isRunning:x,setIsRunning:d,cancelWorkflow:()=>{d(!1),l(e=>e.map(o=>o.status==="processing"?{...o,status:"error",error:"Cancelado por el usuario"}:o))}};return N.jsx(k.Provider,{value:D,children:a})}function G(){const a=s.useContext(k);if(a===void 0)throw new Error("useMultiOCRWorkflow must be used within a MultiOCRWorkflowProvider");return a}export{U as M,G as u};
