var g=Object.defineProperty;var w=(s,e,t)=>e in s?g(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var f=(s,e,t)=>w(s,typeof e!="symbol"?e+"":e,t);class P{static async processImage(e,t){var u,o,p,i,c,d;try{if(!t.appId||!t.appKey)throw new Error("App ID y App Key son requeridos");const r=new FormData;r.append("file",e);const l={include_math:t.includeMath??!0,include_latex:((u=t.outputFormats)==null?void 0:u.includes("latex"))??!0,include_mathml:((o=t.outputFormats)==null?void 0:o.includes("mathml"))??!0,include_text:((p=t.outputFormats)==null?void 0:p.includes("text"))??!0};Object.entries(l).forEach(([_,x])=>{r.append(_,x.toString())});const m=`${this.API_BASE_URL}/text`,h={app_id:t.appId,app_key:t.appKey},a=await fetch(m,{method:"POST",headers:h,body:r});let n;const y=a.headers.get("content-type");return y&&y.includes("application/json")?n=await a.json():n=await a.text(),{status:a.status,data:n,error:a.ok?void 0:`Error ${a.status}: ${a.statusText}`,request:{url:m,method:"POST",headers:h,body:r,parameters:{file:{name:e.name,size:e.size,type:e.type},...l}}}}catch(r){return console.error("Error processing image with Mathpix:",r),{status:0,data:null,error:r instanceof Error?r.message:"Error desconocido",request:{url:`${this.API_BASE_URL}/text`,method:"POST",headers:{app_id:t.appId,app_key:t.appKey},body:new FormData,parameters:{file:{name:e.name,size:e.size,type:e.type},include_math:t.includeMath??!0,include_latex:((i=t.outputFormats)==null?void 0:i.includes("latex"))??!0,include_mathml:((c=t.outputFormats)==null?void 0:c.includes("mathml"))??!0,include_text:((d=t.outputFormats)==null?void 0:d.includes("text"))??!0}}}}}static validateImageFile(e){if(!["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp","application/pdf"].includes(e.type))return{valid:!1,error:"Tipo de archivo no soportado. Use JPG, PNG, GIF, BMP, WebP o PDF."};const u=10*1024*1024;return e.size>u?{valid:!1,error:"El archivo es demasiado grande. MÃ¡ximo 10MB."}:{valid:!0}}static formatResponseData(e){return typeof e=="string"?e:typeof e=="object"&&e!==null?JSON.stringify(e,null,2):String(e)}}f(P,"API_BASE_URL","https://api.mathpix.com/v3");export{P as M};
