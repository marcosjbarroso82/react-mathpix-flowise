import{w as C,a,p as e}from"./chunk-B7RQU5TL-xj-QjgGV.js";import{u as P}from"./FlowiseAgentsContext-DaThIt2D.js";import{u as S}from"./PromptsContext-klJWnLUU.js";import{P as A}from"./PageHeader-Bi621ECd.js";import"./UIContext-ou41-CYt.js";function B({}){return[{title:"Flowise Agents - AI Agent Testing"},{name:"description",content:"Plataforma para probar y experimentar con agentes de Flowise AI"}]}const I=C(function(){const{agents:d,isLoading:y}=P(),{prompts:l}=S(),[o,f]=a.useState(""),[u,g]=a.useState(""),[i,n]=a.useState(""),[h,p]=a.useState(!1),[b,c]=a.useState(null),[m,x]=a.useState(null);a.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("prompt");t&&n(t)},[]);const j=async r=>{if(r.preventDefault(),!o||!i.trim())return;const t=d.find(s=>s.id===o);if(t){p(!0),x(null),c(null);try{const s=await fetch(t.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:i.trim()})});if(!s.ok)throw new Error(`Error ${s.status}: ${s.statusText}`);const N=await s.json();c(N)}catch(s){x(s instanceof Error?s.message:"Error desconocido")}finally{p(!1)}}},v=()=>{n(""),c(null),x(null)},w=r=>{const t=l.find(s=>s.id===r);t&&(n(t.content),g(r))},k=()=>{g(""),n("")};return e.jsxs("div",{className:"min-h-screen pb-20",style:{backgroundColor:"var(--color-background)"},children:[e.jsx(A,{title:"Flowise Agents",description:"Plataforma para probar y experimentar con agentes de IA",icon:"ü§ñ"}),e.jsx("div",{className:"p-4",children:y?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Cargando agentes..."})}):d.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--color-accent)"},children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("h2",{className:"text-lg font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"No hay agentes configurados"}),e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--color-text-secondary)"},children:"Ve a Configuraci√≥n para agregar tu primer agente de Flowise"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[e.jsx("button",{onClick:()=>window.location.href="/settings",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors duration-200",children:"Ir a Configuraci√≥n"}),l.length>0&&e.jsx("button",{onClick:()=>window.location.href="/prompts",className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md transition-colors duration-200",children:"Gestionar Prompts"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"Seleccionar Agente"}),e.jsxs("select",{value:o,onChange:r=>f(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Selecciona un agente..."}),d.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),o&&l.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium",style:{color:"var(--color-text-primary)"},children:"Seleccionar Prompt"}),e.jsx("button",{onClick:()=>window.location.href="/prompts",className:"text-xs text-blue-600 hover:text-blue-700 underline",children:"Gestionar Prompts"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:u,onChange:r=>w(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Selecciona un prompt..."}),l.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),u&&e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:k,className:"text-xs text-gray-600 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 underline",children:"Escribir pregunta personalizada"})})]})]}),o&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"Pregunta"}),e.jsx("textarea",{value:i,onChange:r=>n(r.target.value),placeholder:"Escribe tu pregunta aqu√≠...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white resize-none"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"submit",disabled:!i.trim()||h,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-md transition-colors duration-200 flex items-center justify-center",children:h?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Enviar Pregunta"}),e.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md transition-colors duration-200",children:"Limpiar"})]})]})}),(b||m)&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-sm font-medium mb-3",style:{color:"var(--color-text-primary)"},children:"Respuesta"}),m?e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm text-red-800 dark:text-red-200 font-medium",children:"Error"})]}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:m})]}):e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm text-green-800 dark:text-green-200 font-medium",children:"Respuesta exitosa"})]}),e.jsx("pre",{className:"text-sm text-green-700 dark:text-green-300 whitespace-pre-wrap overflow-x-auto",children:JSON.stringify(b,null,2)})]})})]})]})})]})});export{I as default,B as meta};
