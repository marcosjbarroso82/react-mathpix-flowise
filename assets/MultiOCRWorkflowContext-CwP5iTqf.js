import{a as s,p as j}from"./chunk-B7RQU5TL-xj-QjgGV.js";const m={questionCompilerAgentId:"",responseAgentIds:[],maxImages:3},k=s.createContext(void 0);function K({children:a}){const[f,i]=s.useState(m),[O,W]=s.useState(!0),[d,l]=s.useState([]),[x,c]=s.useState([]),[v,p]=s.useState(!1),[M,C]=s.useState(""),[A,w]=s.useState(null),[h,R]=s.useState({});s.useEffect(()=>{try{const e=localStorage.getItem("multi-ocr-workflow-config");if(e){const o=JSON.parse(e);i(t=>({...m,...o}))}}catch(e){console.error("Error loading Multi-OCR Workflow config from localStorage:",e)}finally{W(!1)}},[]);const E=e=>{i(o=>({...o,...e}))},T=e=>{i(e);try{localStorage.setItem("multi-ocr-workflow-config",JSON.stringify(e))}catch(o){console.error("Error saving Multi-OCR Workflow config to localStorage:",o)}},P=()=>{i(m);try{localStorage.removeItem("multi-ocr-workflow-config")}catch(e){console.error("Error removing Multi-OCR Workflow config from localStorage:",e)}},y=e=>{const o=f.maxImages||3,t=d.length,n=Math.max(0,o-t),N=e.slice(0,n).map(r=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),file:r,name:r.name,size:r.size,status:"pending"}));l(r=>[...r,...N])},L=e=>{l(o=>o.filter(t=>t.id!==e))},g=()=>{l([])},_=(e,o,t)=>{l(n=>n.map(u=>u.id===e?{...u,status:o,...t&&{ocrResult:t}}:u))},b=()=>{c([{id:"ocr-processing",name:"Procesamiento OCR de imágenes",status:"pending"},{id:"ocr-compilation",name:"Compilación de resultados OCR",status:"pending"},{id:"question-compiler",name:"Procesamiento con agente compilador",status:"pending"},{id:"response-agents",name:"Procesamiento con agentes de respuesta",status:"pending"}])},q=(e,o)=>{c(t=>t.map(n=>n.id===e?{...n,...o}:n))},z=(e,o)=>{R(t=>({...t,[e]:o}))},S=()=>{C(""),w(null),R({})},D=()=>{p(!1),c(e=>e.map(o=>o.status==="processing"?{...o,status:"error",error:"Cancelado por el usuario"}:o))},I=()=>{g()},F={config:f,updateConfig:E,saveConfig:T,resetToDefaults:P,isLoading:O,images:d,addImages:y,removeImage:L,clearImages:g,updateImageStatus:_,workflowSteps:x,updateWorkflowStep:q,initializeWorkflowSteps:b,resetWorkflow:()=>{I()},compiledOCRText:M,setCompiledOCRText:C,questionCompilerResult:A,setQuestionCompilerResult:w,responseAgentsResults:h,setResponseAgentResult:z,clearResults:S,isRunning:v,setIsRunning:p,cancelWorkflow:D,resetImages:I,resetAll:()=>{c([]),g(),S()}};return j.jsx(k.Provider,{value:F,children:a})}function Q(){const a=s.useContext(k);if(a===void 0)throw new Error("useMultiOCRWorkflow must be used within a MultiOCRWorkflowProvider");return a}export{K as M,Q as u};
